/*************************
 * Heriland â€“ æŽ¨è–¦ (Recommend)
 * scope: #recommend only
 *************************/

/* ===== Theme tokens ===== */
#recommend{
  /* Light mode */
  --hl-bg: #0f1113;                 /* ä½ ç«™å…§æ·±è‰²åº• */
  --hl-surface: rgba(255,255,255,.06);
  --hl-surface-strong: rgba(255,255,255,.08);
  --hl-border: rgba(255,255,255,.14);
  --hl-text: #e9edf1;
  --hl-sub: #c3cbd2;
  --hl-muted: #9fb0bd;

  /* Brand */
  --hl-green: #1e6b5b;              /* æ£®æž—ç¶  */
  --hl-green-weak: rgba(30,107,91,.25);
  --hl-gold: #F6C350;               /* é¦™æª³é‡‘ */
  --hl-like: #ff5a7a;
  --hl-danger: #ff6b6b;

  /* Cards */
  --card-radius: 14px;
  --card-shadow: 0 10px 28px rgba(0,0,0,.24) inset, 0 12px 24px rgba(0,0,0,.22);
}

/* è‡ªå‹•æ·ºè‰²æ”¯æ´ï¼ˆè‹¥ä½ æœ‰ data-theme å¯å†è¦†è“‹ï¼‰ */
@media (prefers-color-scheme: light){
  #recommend{
    --hl-bg:#f6f7f9; --hl-text:#17212b; --hl-sub:#445160; --hl-muted:#66798a;
    --hl-surface: rgba(18,20,23,.04);
    --hl-surface-strong: rgba(18,20,23,.06);
    --hl-border: rgba(18,20,23,.12);
  }
}

/* ===== Page layout ===== */
#recommend.vip-view{ display:flex; flex-direction:column; min-height:100%; background:var(--hl-bg); color:var(--hl-text); }
/* Headerï¼ˆæ²¿ç”¨ä½ çš„æ•´é«”é¢¨æ ¼ï¼Œç¨ä½œæ‹‹å…‰ï¼‰ */
#recommend .sub-header{
  position: sticky; top:0; z-index: 20;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 16px;
  background: linear-gradient(180deg, rgba(15,17,19,.92), rgba(15,17,19,.5));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(10px);
}
#recommend .sub-header h3{ margin:0; font-size:18px; font-weight:900; letter-spacing:.2px; }
#recommend .sub-header .left button,
#recommend .sub-header .right button{
  padding:8px 14px; border-radius:999px; border:1px solid var(--border);
  background: rgba(255,255,255,.08); color: var(--text);
}

/* å…§æ–‡å®¹å™¨ç½®ä¸­é™å¯¬ï¼Œåˆ†æ®µä¹‹é–“ç•™ç™½æ˜Žé¡¯ */
#recommend .content{ flex:1 1 auto; min-height:0; overflow:auto; padding:14px 16px 18px; }
#recommend .content > .rec-block{ max-width:1040px; margin-inline:auto; margin-top:18px; }

/* ===== Block head ===== */
#recommend .block-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;
}
#recommend .block-head h4{
  margin:0; font-size:18px; font-weight:900; letter-spacing:.2px;
  display:flex; align-items:center; gap:8px;
  color:var(--hl-text);
}
/* ä¸åŒæ¨¡çµ„çš„å“ç‰Œå¼·èª¿ï¼ˆå·¦æ¡†ç·š + chipï¼‰ */
#recommend #recCities .block-head h4{ border-left:4px solid var(--hl-green); padding-left:10px; }
#recommend #recSimilar .block-head h4::before{ content:"ðŸ”®"; }
#recommend #recTrending .block-head h4::before{ content:"ðŸ”¥"; }
#recommend .block-head .hint .chip{
  display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px;
  font-size:12px; color:var(--hl-text);
  background:var(--hl-surface); border:1px solid var(--hl-border);
}

/* ===== Lists & cards ===== */
#recommend .rec-list{ list-style:none; margin:0; padding:0; display:grid; gap:12px; }

/* 1) ç‚ºä½ æŽ¨è–¦åŸŽå¸‚ï¼šå…©æ¬„å¤§å¡ */
#recommend #recCitiesList{ grid-template-columns: repeat(2, minmax(0,1fr)); }
/* 2) çŒœä½ æœƒå–œæ­¡ï¼šå…©æ¬„å¡ + æŽ¨è–¦ç†ç”± chip */
#recommend #recSimilarList{ grid-template-columns: repeat(2, minmax(0,1fr)); }
/* 3) ç†±é–€é«”é©—ï¼šä¸‰æ¬„ç·Šæ¹Šï¼ˆæŽ’è¡Œæ¦œæ„Ÿï¼‰ */
#recommend #recTrendingList{ grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px; }

@media (max-width: 860px){
  #recommend #recTrendingList{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 520px){
  #recommend #recCitiesList, #recommend #recSimilarList, #recommend #recTrendingList{
    grid-template-columns: 1fr;
  }
}

/* å…±é€šå¡ç‰‡å¤–è§€ */
#recommend .rec-card{
  background:linear-gradient(180deg, var(--hl-surface), var(--hl-surface-strong));
  border:1px solid var(--hl-border);
  border-radius:var(--card-radius);
  overflow:hidden; box-shadow:var(--card-shadow);
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
#recommend .rec-card:active{ transform:scale(.98); }
#recommend .rec-main{ display:flex; flex-direction:column; text-decoration:none; color:inherit; }
#recommend .thumb{ position:relative; width:100%; overflow:hidden; background:rgba(255,255,255,.08); }
#recommend .thumb[data-ratio="4:3"]::before{ content:""; display:block; padding-top:75%; }
#recommend .thumb[data-ratio="16:9"]::before{ content:""; display:block; padding-top:56.25%; }
#recommend .thumb img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; }
#recommend .rec-card .info{ padding:12px; display:flex; flex-direction:column; gap:8px; }
#recommend .rec-card .name, #recommend .rec-card .title{
  margin:0; font-size:16px; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
#recommend .rec-card .meta{ display:flex; gap:6px; flex-wrap:wrap; }
#recommend .rec-card .chip{
  display:inline-flex; align-items:center; gap:6px; padding:5px 10px; border-radius:999px;
  font-size:12px; color:var(--hl-text);
  background:rgba(255,255,255,.08); border:1px solid var(--hl-border);
}
#recommend .rec-card .chip.city{ color:var(--hl-text); }
#recommend .rec-card .chip.tag{ color:var(--hl-sub); }
/* æŽ¨è–¦ç†ç”± chipï¼ˆåŠ å“ç‰Œé‚Šæ¡†ï¼‰ */
#recommend #recSimilarList .rec-card .chip.reason{
  border-color:var(--hl-green); color:var(--hl-text); background:var(--hl-green-weak);
}

/* å¡ç‰‡å³å´æ“ä½œåˆ— */
#recommend .rec-card .actions{
  display:flex; align-items:center; gap:8px; padding:10px 12px 12px;
}
#recommend .btn-icon{
  width:42px; height:42px; border-radius:50%; border:1px solid var(--hl-border);
  background:rgba(255,255,255,.06); color:var(--hl-text);
  display:grid; place-items:center; cursor:pointer;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
#recommend .btn-icon:active{ transform:scale(.95); }

/* â¤ï¸ æ”¶è—ï¼šæŒ‰ä¸‹æœ‰ 0.2s å¿ƒè·³å‹•ç•«èˆ‡é¡è‰² */
#recommend .rec-like[aria-pressed="true"]{
  background:rgba(255,90,122,.14); border-color:rgba(255,90,122,.5); color:var(--hl-like);
  animation: rec-like-pulse .2s ease;
}
@keyframes rec-like-pulse{
  0%{ transform:scale(0.9); }
  60%{ transform:scale(1.12); }
  100%{ transform:scale(1); }
}

/* âž• åŠ å…¥æˆ‘çš„æ—…ç¨‹ï¼šè† å›ŠæŒ‰éˆ•æ¨£å¼èˆ‡å·²åŠ å…¥ç‹€æ…‹ */
#recommend .rec-add{
  border-radius:999px; padding:0 14px; width:auto; min-width:44px; height:42px;
  font-weight:700;
}
#recommend .rec-add.added{
  background:linear-gradient(180deg, #b6e2cf, #79c9ad);
  border-color:transparent; color:#103b32;
}
#recommend .rec-add.added::before{ content:"âœ… "; }

/* ðŸš« ä¸æ„Ÿèˆˆè¶£ï¼šé»žé–‹ dropdown ç”¨ JSï¼›é€™è£¡å…ˆä¿æŒ icon æ¨£å¼ */
#recommend .rec-hide{}

/* ã€Œçœ‹æ›´å¤šã€æŒ‰éˆ• */
#recommend .block-actions{ display:flex; justify-content:flex-end; margin-top:8px; }
#recommend .block-actions .btn{
  padding:10px 14px; border-radius:999px; border:1px solid var(--hl-border);
  background:rgba(255,255,255,.06); color:var(--hl-text);
}
#recommend .block-actions .btn:hover{ background:rgba(255,255,255,.1); }

/* ===== Storiesï¼šæ—…äººæ•…äº‹ / éˆæ„Ÿï¼ˆInstagram é™å‹•æ„Ÿï¼Œæ©«å‘æ»‘å‹•ï¼‰ ===== */
#recommend .rec-list.stories{
  display:flex; gap:12px; overflow-x:auto; padding-bottom:4px;
  scroll-snap-type: x proximity; -webkit-overflow-scrolling: touch;
}
#recommend .rec-list.stories .rec-item{ flex:0 0 68%; scroll-snap-align:start; }
@media (min-width: 760px){ #recommend .rec-list.stories .rec-item{ flex-basis: 42%; } }
#recommend .rec-story{
  position:relative; border-radius:var(--card-radius); overflow:hidden;
  background:linear-gradient(180deg, var(--hl-surface), var(--hl-surface-strong));
  border:1px solid var(--hl-border); box-shadow:var(--card-shadow);
}
#recommend .rec-story .thumb::after{
  /* æ¼¸å±¤ç½©ï¼Œç‡Ÿé€ é™å‹•å‘³é“ */
  content:""; position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.0) 45%, rgba(0,0,0,.45) 100%);
}
#recommend .rec-story .info{
  position:absolute; left:0; right:0; bottom:0; padding:12px;
  display:flex; flex-direction:column; gap:6px;
}
#recommend .rec-story .title{ color:#fff; text-shadow:0 2px 8px rgba(0,0,0,.6); }
#recommend .rec-story .chip{ background:rgba(0,0,0,.35); border-color:rgba(255,255,255,.4); color:#fff; }

/* ===== Eventsï¼šæ´»å‹• / é™æ™‚ Banner ===== */
#recommend .rec-list.events{ display:block; }
#recommend .rec-list.events .rec-item{ list-style:none; }
#recommend .rec-event{
  display:block; overflow:hidden;
  border-radius:16px; background:linear-gradient(180deg, var(--hl-surface), var(--hl-surface-strong));
  border:1px solid var(--hl-border); box-shadow:var(--card-shadow);
}
#recommend .rec-event .thumb[data-ratio="16:9"]::before{ padding-top:38%; } /* é¡¯å¾—æ›´å¯¬ã€åƒæ©«å¹… */
#recommend .rec-event .info{ padding:12px 14px; display:flex; align-items:center; justify-content:space-between; gap:10px; }
#recommend .rec-event .meta{ display:flex; gap:8px; flex-wrap:wrap; }
#recommend .rec-event .chip.countdown{ border-color:var(--hl-gold); color:var(--hl-text); background:rgba(246,195,80,.15); }
#recommend .rec-event .countdown-bar{
  height:6px; border-radius:999px; overflow:hidden; background:rgba(255,255,255,.08); margin-top:8px;
}
#recommend .rec-event .countdown-bar > i{
  display:block; height:100%; width:40%; background:linear-gradient(90deg, var(--hl-gold), #ffd986);
}

/* ===== Empty state ===== */
#recommend .empty-state{
  max-width: 720px; margin: 18px auto 0;
  text-align:center; padding:28px 16px;
  background:linear-gradient(180deg, var(--hl-surface), var(--hl-surface-strong));
  border:1px dashed var(--hl-border); border-radius:16px; color:var(--hl-sub);
}
#recommend .empty-state .illus{ font-size:48px; margin-bottom:6px; }
#recommend .empty-state h4{ margin:6px 0 4px; color:var(--hl-text); }
#recommend .empty-state .btn{
  margin-top:10px; padding:10px 14px; border-radius:12px;
  border:1px solid var(--hl-border);
  background:rgba(255,255,255,.06); color:var(--hl-text);
}

/* ===== Section entrance animations (Netflix row-like) ===== */
#recommend .rec-block{ opacity:0; transform: translateY(8px); animation: rec-enter .36s ease forwards; }
#recommend #recSimilar{ animation-delay:.05s; }
#recommend #recTrending{ animation-delay:.1s; }
#recommend #recStories{ animation-delay:.15s; }
#recommend #recEvents{ animation-delay:.2s; }
@keyframes rec-enter{
  to{ opacity:1; transform:none; }
}

/* ===== Mobile ergonomics ===== */
@media (max-width: 428px){
  #recommend .sub-header{ padding:12px 14px; }
  #recommend .sub-header .left button,
  #recommend .sub-header .right button{ min-height:36px; }
  #recommend .rec-card .name{ font-size:17px; }
  #recommend .btn-icon{ width:46px; height:46px; }
  #recommend .rec-add{ height:46px; padding:0 16px; }
}

/* Safety */
#recommend, #recommend *{ box-sizing:border-box; max-width:100%; }
#recommend img{ max-width:100%; height:auto; display:block; }