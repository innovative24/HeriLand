/* =========================================
   HeriLand 推薦頁 CSS（無 JS 版本）
   A. 風格：Netflix + 旅遊靈感牆、毛玻璃、品牌色
   ========================================= */

/* ---- 色票與尺寸變數 ---- */
:root {
  --brand-green: #1f6b4a;       /* 森林綠 */
  --brand-gold:  #c9a86a;       /* 香檳金 */
  --ink-900:     #121416;
  --ink-700:     #2b2f33;
  --ink-500:     #555b61;
  --ink-300:     #8b949e;
  --ink-100:     #e9edf2;
  --bg-0:        #f7f9fb;       /* 淺底 */
  --glass-bg:    rgba(255,255,255,0.6);
  --glass-stroke:rgba(255,255,255,0.35);
  --muted:       rgba(0,0,0,0.05);

  --radius-12:   12px;
  --radius-16:   16px;
  --radius-20:   20px;

  --shadow-1: 0 6px 18px rgba(0,0,0,0.08);
  --shadow-2: 0 10px 32px rgba(0,0,0,0.12);

  --title-18: 18px; /* 標題 */
  --name-16:  16px; /* 商家名稱 */
  --chip-12:  12px; /* chip */
}

/* ---- 深色模式（可用 [data-theme="dark"] 置頂覆蓋） ---- */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-0:        #0c0d0e;
    --glass-bg:    rgba(22,24,28,0.55);
    --glass-stroke:rgba(255,255,255,0.08);
    --muted:       rgba(255,255,255,0.06);
    --ink-900:     #f2f4f7;
    --ink-700:     #d8dde3;
    --ink-500:     #a9b2bc;
    --ink-300:     #7c8794;
    --ink-100:     #23272e;
    --shadow-1: 0 6px 18px rgba(0,0,0,0.35);
    --shadow-2: 0 10px 32px rgba(0,0,0,0.45);
  }
}
:root[data-theme="dark"] {
  --bg-0:        #0c0d0e;
  --glass-bg:    rgba(22,24,28,0.55);
  --glass-stroke:rgba(255,255,255,0.08);
  --muted:       rgba(255,255,255,0.06);
  --ink-900:     #f2f4f7;
  --ink-700:     #d8dde3;
  --ink-500:     #a9b2bc;
  --ink-300:     #7c8794;
  --ink-100:     #23272e;
  --shadow-1: 0 6px 18px rgba(0,0,0,0.35);
  --shadow-2: 0 10px 32px rgba(0,0,0,0.45);
}

/* ---- Reset & Base ---- */
* { box-sizing: border-box; }
html, body {
  margin: 0; padding: 0;
  background: var(--bg-0);
  color: var(--ink-900);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", "PingFang TC", "Heiti TC", Arial, sans-serif;
  line-height: 1.5;
}
img { display:block; width:100%; height:auto; }
a { color: inherit; text-decoration: none; }
ul { list-style: none; margin: 0; padding: 0; }

/* ---- Header（毛玻璃導覽列） ---- */
header[role="banner"] {
  position: sticky; top: 0; z-index: 20;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: var(--glass-bg);
  border-bottom: 1px solid var(--glass-stroke);
}
header nav {
  max-width: 1120px; margin: 0 auto; padding: 12px 16px;
  display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 8px;
}
#btn-back-member { justify-self: start; padding: 6px 10px; border-radius: 10px; background: var(--muted); }
#page-title { margin: 0; font-size: 20px; font-weight: 700; text-align: center; letter-spacing: 0.5px; }
#btn-home { justify-self: end; padding: 6px 10px; border-radius: 10px; color: var(--brand-green); font-weight: 700; }

/* ---- 主容器與分段留白 ---- */
main#recommend-root {
  max-width: 1120px; margin: 20px auto 80px; padding: 0 16px;
}
section { margin: 28px 0 40px; }

/* ---- 分段標題（品牌色強調 + Banner/前綴icon） ---- */
section > header {
  display:flex; align-items: center; justify-content: space-between; gap: 12px;
  margin-bottom: 16px;
}
section > header h2 {
  margin: 0; font-size: var(--title-18); font-weight: 800;
  display: inline-flex; align-items: center; gap: 10px;
  padding: 10px 14px;
  border-radius: 999px;
  background: linear-gradient( to right, color-mix(in srgb, var(--brand-green) 16%, transparent), transparent );
  border: 1px solid color-mix(in srgb, var(--brand-green) 38%, var(--glass-stroke));
}
#sec-city-for-you > header h2::before { content: "🏙️"; }
#sec-you-may-like   > header h2::before { content: "🔮"; }
#sec-trending       > header h2::before { content: "🔥"; }
#sec-stories        > header h2::before { content: "📖"; }
#sec-events         > header h2::before { content: "🎪"; }

/* ---- Chips ---- */
.chips { display:flex; gap: 8px; flex-wrap: wrap; }
.chip {
  font-size: var(--chip-12); line-height: 1; padding: 8px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--brand-green) 8%, var(--muted));
  border: 1px dashed color-mix(in srgb, var(--brand-green) 45%, transparent);
  color: color-mix(in srgb, var(--brand-green) 75%, var(--ink-700));
}

/* =========================================
   B. 卡片版型：兩欄／三欄 + 毛玻璃
   ========================================= */

/* ---- 通用卡片清單 ---- */
.card-list {
  display: grid; gap: 16px;
}

/* 兩欄大卡（城市 / 猜你會喜歡）：圖片+文字+chips */
#sec-city-for-you .card-list,
#sec-you-may-like .card-list {
  grid-template-columns: repeat(2, minmax(0,1fr));
}

/* 三欄緊湊卡（熱門排行榜） */
#sec-trending .card-list {
  grid-template-columns: repeat(3, minmax(0,1fr));
}

/* 故事矩形卡（IG 限動感） */
#sec-stories .card-list {
  grid-template-columns: repeat(3, minmax(0,1fr));
}

/* RWD */
@media (max-width: 920px) {
  #sec-trending .card-list,
  #sec-stories .card-list { grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 640px) {
  #sec-city-for-you .card-list,
  #sec-you-may-like .card-list,
  #sec-trending .card-list,
  #sec-stories .card-list { grid-template-columns: 1fr; }
}

/* ---- 卡片通用樣式 ---- */
.card {
  position: relative; overflow: clip;
  border-radius: var(--radius-16);
  background: var(--glass-bg);
  border: 1px solid var(--glass-stroke);
  box-shadow: var(--shadow-1);
  transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: color-mix(in srgb, var(--brand-green) 18%, var(--glass-stroke)); }
.card-link { display:block; color: inherit; }
.card-media { aspect-ratio: 16/10; overflow: hidden; background: var(--muted); }
.card-body { padding: 12px 14px 10px; }
.card-title { margin: 0 0 6px; font-size: var(--name-16); font-weight: 700; }
.card-subtitle { margin: 0 0 6px; color: var(--ink-500); font-weight: 600; }
.card-meta { margin: 0; color: var(--ink-300); font-size: 13px; }

/* 卡片底部操作列 */
.card-actions {
  display:flex; gap: 10px; align-items: center; padding: 10px 14px 14px;
}
.card-actions .btn-fav,
.card-actions .btn-add,
.card-actions .btn-hide,
.card-actions .btn-share {
  appearance: none; border: 0; cursor: pointer;
  font: inherit; color: inherit;
  padding: 8px 12px; border-radius: 999px;
  background: var(--ink-100);
  transition: transform .12s ease, background .12s ease, opacity .12s ease;
}
.card-actions .btn-add {
  background: color-mix(in srgb, var(--brand-green) 14%, var(--ink-100));
  color: color-mix(in srgb, white 96%, var(--brand-green));
  border: 1px solid color-mix(in srgb, var(--brand-green) 50%, transparent);
}
.card-actions .btn-fav:active,
.card-actions .btn-add:active,
.card-actions .btn-hide:active { transform: scale(0.94); }

/* C. 互動效果視覺：狀態用類名切換（未含 JS） */
.btn-fav.is-active { 
  background: color-mix(in srgb, var(--brand-gold) 18%, var(--ink-100));
  border: 1px solid color-mix(in srgb, var(--brand-gold) 55%, transparent);
  animation: fav-bounce .2s ease;
}
@keyframes fav-bounce {
  0% { transform: scale(1); }
  50%{ transform: scale(1.18); }
  100%{ transform: scale(1); }
}

.btn-add.is-added {
  background: color-mix(in srgb, var(--brand-green) 36%, var(--ink-100));
  color: #fff; position: relative;
}
.btn-add.is-added::after {
  content: "✅ 已加入"; margin-left: 6px; font-weight: 700;
}

/* 不感興趣：隱藏時淡出滑下（給 .is-hidden） */
.card.is-hidden {
  opacity: 0; transform: translateY(10px); pointer-events: none; transition: opacity .18s ease, transform .18s ease;
}

/* 小選單外觀（純 CSS 皮膚，實際開關靠 JS 未實作） */
.card .dropdown {
  position: absolute; right: 10px; top: 10px; z-index: 5;
  background: var(--glass-bg); border:1px solid var(--glass-stroke);
  border-radius: 10px; box-shadow: var(--shadow-2); padding: 6px; display:none;
}
.card.show-dropdown .dropdown { display:block; }

/* ---- 猜你會喜歡：卡片內「推薦理由」小 chip ---- */
#sec-you-may-like .card-body::after {
  content: attr(data-reason);
  display: inline-block; margin-top: 6px; padding: 6px 8px; font-size: var(--chip-12);
  border-radius: 999px;
  background: color-mix(in srgb, var(--brand-gold) 14%, var(--muted));
  border: 1px solid color-mix(in srgb, var(--brand-gold) 45%, transparent);
  color: color-mix(in srgb, var(--brand-gold) 70%, var(--ink-700));
}

/* ---- 熱門體驗：更緊湊的排行榜視覺 ---- */
#sec-trending .card { border-radius: var(--radius-12); }
#sec-trending .card-media { aspect-ratio: 4/3; }
#sec-trending .card-meta { color: color-mix(in srgb, var(--brand-gold) 60%, var(--ink-300)); font-weight: 700; }

/* ---- 旅人故事卡：IG 限動風格 ---- */
#sec-stories .card {
  overflow: hidden;
  background: linear-gradient(180deg, color-mix(in srgb, var(--brand-green) 12%, transparent), transparent);
}
#sec-stories .card-media { aspect-ratio: 16/9; }
#sec-stories .card-body {
  position: relative; padding-top: 10px;
}
#sec-stories .card-body::before {
  /* 小頭像占位（可用背景圖覆蓋） */
  content: ""; position: absolute; left: 14px; top: -16px; width: 36px; height: 36px;
  border-radius: 50%; border: 2px solid var(--bg-0);
  background: linear-gradient(135deg, var(--brand-gold), var(--brand-green));
  box-shadow: 0 2px 10px rgba(0,0,0,0.12);
}

/* ---- 活動／限時：全寬 Banner + 倒數條 ---- */
#sec-events .card-list { display: block; } /* 單列全寬 */
#sec-events .card {
  display: grid; grid-template-columns: 2fr 3fr; gap: 0;
  border-radius: var(--radius-20);
}
#sec-events .card-media { aspect-ratio: auto; height: 100%; min-height: 180px; }
#sec-events .card-body { display: flex; flex-direction: column; gap: 8px; justify-content: center; }
#sec-events .card-meta {
  position: relative; padding-top: 6px;
}
#sec-events .card-meta::before {
  content: ""; position: absolute; left: 0; right: 0; top: 0; height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--brand-gold), color-mix(in srgb, var(--brand-gold) 20%, transparent));
  /* 無 JS 版本：靜態條，之後可用 JS 依剩餘時間調整 width */
}
@media (max-width: 800px) {
  #sec-events .card { grid-template-columns: 1fr; }
}

/* =========================================
   D. 動畫：區塊進場（Netflix 橫列感）
   ========================================= */
@keyframes rise-fade {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
section {
  animation: rise-fade .36s ease both;
}
section:nth-of-type(1) { animation-delay: .02s; }
section:nth-of-type(2) { animation-delay: .06s; }
section:nth-of-type(3) { animation-delay: .10s; }
section:nth-of-type(4) { animation-delay: .14s; }
section:nth-of-type(5) { animation-delay: .18s; }

/* =========================================
   E. 空狀態（地球 + 星星 ✨）
   ========================================= */
#empty-state {
  text-align: center;
  padding: 48px 16px;
  border-radius: var(--radius-20);
  background: var(--glass-bg);
  border: 1px dashed var(--glass-stroke);
  color: var(--ink-700);
}
#empty-state [role="img"] {
  font-size: 40px; margin-bottom: 10px;
}
#empty-state h2 { margin: 0 0 8px; font-size: 20px; }
#empty-state p { margin: 6px 0; }
#empty-state a {
  display: inline-block; margin-top: 10px; padding: 10px 14px; border-radius: 999px;
  background: color-mix(in srgb, var(--brand-green) 18%, var(--ink-100));
  color: #fff; font-weight: 700; border: 1px solid color-mix(in srgb, var(--brand-green) 45%, transparent);
  box-shadow: var(--shadow-1);
}

/* =========================================
   細節微調
   ========================================= */
figure { margin: 0; }
.card-media img { width: 100%; height: 100%; object-fit: cover; }
.card + .card { /* 無縫間距優化（可保留） */ }