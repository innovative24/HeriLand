/* =========================
   Mobile One-Page Baseline
   垂直滾動 / 禁止水平
   ========================= */

/* 全域：只允許垂直手勢，避免水平滾動與彈回 */
html, body {
  width: 100%;
  max-width: 100%;
  height: 100%;
  overflow-x: hidden;            /* 禁用水平捲軸 */
  overscroll-behavior-x: none;   /* 禁止水平邊緣彈回 */
  touch-action: pan-y;           /* 僅允許上下滑 */
  -webkit-text-size-adjust: 100%;
}

/* 盒模型與媒體元素安全設定 */
*, *::before, *::after { box-sizing: border-box; }
img, video, canvas { max-width: 100%; height: auto; display: block; }

/* 視圖容器：每個子頁（vipDashboard / trips / favorites…） */
.vip-view {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  max-width: 100%;
  overflow-x: hidden;            /* 再保險一層 */
  background: #0f1113;           /* 深色底，可依主題調整 */
  color: #e9edf1;
}

/* 頂部標題列（固定於子頁最上） */
.vip-view .sub-header {
  position: sticky;
  top: 0;
  z-index: 20;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(15,17,19,.85), rgba(15,17,19,.35));
  border-bottom: 1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(8px);
}

/* 內容區：僅垂直滾動、不可水平溢出 */
.vip-view .content {
  flex: 1 1 auto;
  min-height: 0;                 /* 避免 sticky 佔滿 */
  max-width: 100%;
  overflow-x: hidden;            /* 禁用水平 */
  overflow-y: auto;              /* 垂直滾動 */
  padding: 16px;
  padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px));
}

/* 主要 UI 控件（按鈕/輸入）基本規範，避免撐寬 */
.input, .btn, .chip, .pill-input, .feature-card, .tab {
  min-width: 0;                  /* 允許變窄，不撐破容器 */
  max-width: 100%;
  word-break: break-word;
}

/* Tabs 群組：禁止水平捲動，長文以省略/斷行處理 */
.tabs {
  display: flex;
  gap: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(255,255,255,.12);
  overflow: hidden;              /* 不做橫向捲動 */
}
.tab {
  white-space: nowrap;           /* 保持膠囊樣式 */
  text-overflow: ellipsis;
  overflow: hidden;
}

/* 清單 / 網格：使用 minmax(0,1fr) 防止子項撐寬 */
.wish-list, .trips, .share-grid {
  display: grid;
  gap: 12px;
  grid-template-columns: minmax(0, 1fr);
}
@media (min-width: 640px) {
  .wish-list { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

/* 卡片樣式（你的 .card / .trip-card / .place-card 可共用） */
.card {
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 16px;
  padding: 14px;
  backdrop-filter: blur(8px);
}

/* 輪播：完全阻擋水平手勢，避免拖出容器 */
.vip-carousel {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 20px;
  overflow: hidden;              /* 斷軌道寬度 */
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  box-shadow: 0 10px 30px rgba(0,0,0,.25) inset, 0 8px 24px rgba(0,0,0,.25);
  touch-action: pan-y;           /* 僅上下滑（禁左右拖） */
}
.vip-carousel-track {
  display: flex;
  height: 100%;
  will-change: transform;        /* 性能優化 */
}
.vip-slide { flex: 0 0 100%; height: 100%; }
.vip-slide img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* 拖曳把手：避免觸發瀏覽器的水平滑動手勢 */
.drag-handle { touch-action: none; cursor: grab; }

/* 底部分享面板與遮罩：同樣僅允許上下手勢 */
.backdrop, .sheet { touch-action: pan-y; overflow-x: hidden; }
.backdrop {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(2px);
  opacity: 0; pointer-events: none;
  transition: opacity .2s ease;
  z-index: 49;
}
.backdrop.show { opacity: 1; pointer-events: auto; }

.sheet {
  position: fixed; left: 0; right: 0; bottom: 0;
  transform: translateY(100%);
  transition: transform .28s ease;
  background: linear-gradient(180deg, rgba(22,24,27,.95), rgba(22,24,27,.98));
  border-top: 1px solid rgba(255,255,255,.12);
  border-radius: 16px 16px 0 0;
  padding: 16px;
  z-index: 50;
}
.sheet.open { transform: translateY(0); }

/* 會員區（Dashboard）與功能卡：也限制橫向 */
#vipDashboard.vip-view { overflow-x: hidden; }
.vip-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
.feature-card { max-width: 100%; }

/* 絕對保險：任何元素不得超過視窗寬度 */
body * { max-width: 100vw; }

/* Header（沿用你的整體風格，稍作拋光） */
#trips .sub-header{
  position: sticky; top:0; z-index: 20;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 16px;
  background: linear-gradient(180deg, rgba(15,17,19,.92), rgba(15,17,19,.5));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(10px);
}
#trips .sub-header h3{ margin:0; font-size:18px; font-weight:900; letter-spacing:.2px; }
#trips .sub-header .left button,
#trips .sub-header .right button{
  padding:8px 14px; border-radius:999px; border:1px solid var(--border);
  background: rgba(255,255,255,.08); color: var(--text);
}